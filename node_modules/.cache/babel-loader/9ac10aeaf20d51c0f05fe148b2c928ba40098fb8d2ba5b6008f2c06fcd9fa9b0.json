{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\IT\\\\JavaScript Bootcamp\\\\e-commerce-store\\\\src\\\\Components\\\\Advertisment\\\\Advertisement.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useReducer, useState } from 'react';\nimport '../Advertisment/Advertisement.css';\nimport Button from '../ReusableComponents/Button/Button';\nimport { useActiveSearchContext } from '../../HelperFunctions/ActiveSearchContext';\n//import { Furniture } from '../../types/types';\n//import { FurnitureData } from '../../data/data'; // Import the furnitureData from data.ts\nimport axios from \"axios\";\n//import { useParams } from 'react-router-dom';\n\n//for external data loading START\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  isLoading: false,\n  data: [],\n  error: \"\"\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOADING\":\n      return {\n        ...state,\n        isLoading: true\n      };\n    case \"SUCCESS\":\n      return {\n        ...state,\n        data: action.payload,\n        isLoading: false\n      };\n    case \"FAILURE\":\n      return {\n        ...state,\n        error: action.payload,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n};\n//for external data loading END\n\nconst Advertisement = () => {\n  _s();\n  const [products, dispatch] = useReducer(reducer, initialState);\n  const [discountedProducts, setDiscountedProducts] = useState([]);\n  const {\n    updateActiveSearch\n  } = useActiveSearchContext();\n  const [randomProduct, setRandomProduct] = useState(null);\n  const [slideIn, setSlideIn] = useState(false);\n  useEffect(() => {\n    const handleFetch = async () => {\n      dispatch({\n        type: \"LOADING\"\n      });\n      try {\n        const response = await axios.get(`http://localhost:3009/get-all`);\n        dispatch({\n          type: \"SUCCESS\",\n          payload: response.data\n        });\n        const filteredProducts = response.data.filter(product => product.discount > 0);\n        setDiscountedProducts(filteredProducts);\n      } catch (err) {\n        dispatch({\n          type: \"FAILURE\",\n          payload: err.message\n        });\n      }\n    };\n    handleFetch();\n  }, []);\n\n  // Pick a random FurnitureData item from the imported data\n  const getRandomProduct = () => {\n    if (discountedProducts.length > 0) {\n      const randomIndex = Math.floor(Math.random() * discountedProducts.length);\n      setRandomProduct(discountedProducts[randomIndex]);\n      setSlideIn(true);\n\n      // Reset the animation after 2.5 seconds to slide the advertisement out\n      setTimeout(() => {\n        setSlideIn(false);\n      }, 5000);\n    }\n  };\n  useEffect(() => {\n    getRandomProduct();\n\n    // Set an interval to change the advertisement every 3 seconds\n    const interval = setInterval(getRandomProduct, 8000);\n\n    // Clear the interval when the component is unmounted\n    return () => clearInterval(interval);\n  }, [discountedProducts]);\n  const showProducts = () => {\n    updateActiveSearch(false);\n  };\n  return randomProduct && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `AdvertisementSectionWrapper ${slideIn ? 'slideIn' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AdvertisementSectionImageWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: randomProduct.image,\n        alt: \"furniture\",\n        className: \"AdvertisementSectionImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: randomProduct.discount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AdvertisementSectionHeadingWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"AdvertisementSectionHeading\",\n        children: randomProduct.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"AdvertisementSectionParagraph\",\n        children: randomProduct.features[1].featureParagraph\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#ProductView\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          text: \"Shop Now\",\n          onClick: showProducts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 7\n  }, this);\n};\n_s(Advertisement, \"M0iRvLrQlyDT5h0ZT5OOD7LkLOo=\", false, function () {\n  return [useActiveSearchContext];\n});\n_c = Advertisement;\nexport default Advertisement;\nvar _c;\n$RefreshReg$(_c, \"Advertisement\");","map":{"version":3,"names":["React","useEffect","useReducer","useState","Button","useActiveSearchContext","axios","jsxDEV","_jsxDEV","initialState","isLoading","data","error","reducer","state","action","type","payload","Advertisement","_s","products","dispatch","discountedProducts","setDiscountedProducts","updateActiveSearch","randomProduct","setRandomProduct","slideIn","setSlideIn","handleFetch","response","get","filteredProducts","filter","product","discount","err","message","getRandomProduct","length","randomIndex","Math","floor","random","setTimeout","interval","setInterval","clearInterval","showProducts","className","children","src","image","alt","fileName","_jsxFileName","lineNumber","columnNumber","title","features","featureParagraph","href","text","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Documents/IT/JavaScript Bootcamp/e-commerce-store/src/Components/Advertisment/Advertisement.js"],"sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\r\nimport '../Advertisment/Advertisement.css';\r\nimport Button from '../ReusableComponents/Button/Button';\r\nimport { useActiveSearchContext } from '../../HelperFunctions/ActiveSearchContext';\r\n//import { Furniture } from '../../types/types';\r\n//import { FurnitureData } from '../../data/data'; // Import the furnitureData from data.ts\r\nimport axios from \"axios\";\r\n//import { useParams } from 'react-router-dom';\r\n\r\n//for external data loading START\r\nconst initialState = {\r\n  isLoading: false,\r\n  data: [],\r\n  error: \"\",\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"LOADING\":\r\n      return { ...state, isLoading: true };\r\n    case \"SUCCESS\":\r\n      return { ...state, data: action.payload, isLoading: false };\r\n    case \"FAILURE\":\r\n      return { ...state, error: action.payload, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n//for external data loading END\r\n\r\nconst Advertisement = () => {\r\n  const [products, dispatch] = useReducer(reducer, initialState);\r\n  const [discountedProducts, setDiscountedProducts] = useState([]);\r\n  const { updateActiveSearch } = useActiveSearchContext();\r\n  const [randomProduct, setRandomProduct] = useState(null);\r\n  const [slideIn, setSlideIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleFetch = async () => {\r\n      dispatch({type: \"LOADING\"});\r\n      try {\r\n        const response = await axios.get(`http://localhost:3009/get-all`);\r\n        dispatch({type: \"SUCCESS\", payload: response.data});\r\n\r\n        const filteredProducts = response.data.filter(product => product.discount > 0);\r\n        setDiscountedProducts(filteredProducts)\r\n      } catch (err) {\r\n        dispatch({ type: \"FAILURE\", payload: err.message});\r\n      }\r\n    };\r\n\r\n    handleFetch();\r\n  }, []);\r\n\r\n    // Pick a random FurnitureData item from the imported data\r\n    const getRandomProduct = () => {\r\n      if (discountedProducts.length > 0) {\r\n        const randomIndex = Math.floor(Math.random() * discountedProducts.length);\r\n        setRandomProduct(discountedProducts[randomIndex]);\r\n        setSlideIn(true);\r\n  \r\n        // Reset the animation after 2.5 seconds to slide the advertisement out\r\n        setTimeout(() => {\r\n          setSlideIn(false);\r\n        }, 5000);\r\n      }\r\n    };\r\n\r\n  useEffect(() => {\r\n    getRandomProduct();\r\n\r\n    // Set an interval to change the advertisement every 3 seconds\r\n    const interval = setInterval(getRandomProduct, 8000);\r\n\r\n    // Clear the interval when the component is unmounted\r\n    return () => clearInterval(interval);\r\n  }, [discountedProducts])\r\n\r\n\r\n  const showProducts = () => {\r\n    updateActiveSearch(false);\r\n  };\r\n\r\n  return (\r\n    randomProduct && (\r\n      <div className={`AdvertisementSectionWrapper ${slideIn ? 'slideIn' : ''}`}>\r\n        <div className='AdvertisementSectionImageWrapper'>\r\n          <img src={randomProduct.image} alt='furniture' className='AdvertisementSectionImage' />\r\n          <p>{randomProduct.discount}</p>\r\n        </div>\r\n        <div className='AdvertisementSectionHeadingWrapper'>\r\n          <h1 className='AdvertisementSectionHeading'>{randomProduct.title}</h1>\r\n          <p className='AdvertisementSectionParagraph'>{randomProduct.features[1].featureParagraph}</p>\r\n          <a href=\"#ProductView\">\r\n            {/* <button \r\n              className='AdvertisementSectionButton' \r\n              onClick={showProducts}>\r\n              Shop Now\r\n            </button> */}\r\n            <Button\r\n              text='Shop Now'\r\n              onClick={showProducts}\r\n            ></Button>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Advertisement;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}